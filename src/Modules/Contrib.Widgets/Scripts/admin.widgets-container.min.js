var WidgetsContainer;(function(){$(function(){var t=[],n;$(".add-widget").on("click",function(n){var e,t,i;n.preventDefault();var o=$(this).data("host-id"),r=$(this).parents("form:first"),u=$(this).parents("fieldset:first"),s=$("#hiddenSubmitSave")[0],f=document.createAttribute("name");if(f.value="submit.Save",s.setAttributeNode(f),e=u.find("input[name='submit.Save']"),t=$(this).attr("href"),o===0){const n=new URLSearchParams(window.location.search),i=n.get("taxonomyId"),u=n.get("parentTermId");i!==null&&u!==null&&(t+="&taxonomyId="+i,t+="&parentTermId="+u);r.attr("action",t)}else e.val("submit.Save"),$("input[type='hidden'][name='returnUrl']").val(t);i=document.createElement("input");i.type="hidden";i.name="executed-action";i.value=t;u.append(i);r.submit()});$("div.widgets").on("click","a.remove-widget",function(i){if(i.preventDefault(),confirm($(this).data("confirm"))){var r=$(this).parents("li:first"),u=r.data("widget-id");r.remove();t.push(u);$("input[name='removedWidgets']").val(JSON.stringify(t));n()}});n=function(){var i=$("input[name='widgetPlacement']"),n={zones:{}},t;$("div.widgets ul.widgets").each(function(){var t=$(this).data("zone");n.zones[t]={widgets:[]};$(this).find("li").each(function(){var i=$(this).data("widget-id");n.zones[t].widgets.push(i)})});t=JSON.stringify(n);i.val(t)};$("div.widgets ul.widgets").sortable({connectWith:"div.widgets ul.widgets",dropOnEmpty:!0,placeholder:"sortable-placeholder",receive:function(){n()},update:function(){n()}});$("#widgetsPlacement legend").expandoControl(function(n){return n.nextAll(".expando")},{collapse:!1,remember:!0,context:"widget-container"})})})(WidgetsContainer||(WidgetsContainer={}));