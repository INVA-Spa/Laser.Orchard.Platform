var niAC,AddressConfiguration=function(){},_isJQ=!!window.jQuery,_window=$(window),_checkInstance=function(){$.addressConfiguration.instance||(niAC=new AddressConfiguration,niAC.init(),$.addressConfiguration.instance=niAC)};AddressConfiguration.prototype={constructor:AddressConfiguration,init:function(){},addAddress:function(n,t){var i=function(){niAC._enableCityInput(n,t)};n.find(t.inputSelector).prop("disabled",!0);n.find(t.freeInputSelector).prop("disabled",!1);var r=n.find(t.countriesInput),u=n.find(t.citiesInput),f=n.find(t.provincesInput);n.on("change",t.countriesInput,i);r.prop("disabled",!1);niAC._enableCityInput(n,t);niAC._enableProvinceInput(n,t);niAC._checkCountryOption(n,t)&&niAC._enableCityInput(n,t)},_checkCountryOption:function(n,t){var i=n.find(t.countriesInput);return i.val()&&i.val()>0?!0:!1},_enableCityInput:function(n,t){if(!t.cityIsFreeText){if(this._checkCountryOption(n,t)){var i={CountryId:n.find(t.countriesInput).val()};$.post(t.getCities.url,{viewmodel:i,__RequestVerificationToken:t.token}).done(function(i){var r,u;if(i.Success){if(i.Cities&&i.Cities.length>0)for(r=0;r<i.Cities.length;r++)u=new Option(i.Cities[r].Text,i.Cities[r].Value,!1,!1),n.find(t.citiesInput).append(u);t.getCities.delegate&&t.getCities.delegate();this._enableAllCity(n,t,!0)}}).fail(function(){}).always(function(){})}}else this._enableAllCity(n,t,!0)},_enableAllCity:function(n,t,i){n.find(t.citiesInput).prop("disabled",!!!i);n.find(t.withCitySelector).prop("disabled",!!!i)},_enableProvinceInput:function(n,t){t.provinceIsFreeText?this._enableAllProvince(n,t,!0):this._enableAllProvince(n,t,!0)},_enableAllProvince:function(n,t,i){n.find(t.provincesInput).prop("disabled",!!!i);n.find(t.withProvinceSelector).prop("disabled",!!!i)}};$.addressConfiguration={instance:null,proto:AddressConfiguration.prototype,defaults:{countriesInput:"",citiesInput:"",provincesInput:"",inputSelector:".address-input",countryIsFreeText:!1,cityIsFreeText:!1,provinceIsFreeText:!1,freeInputSelector:".free-text",withCitySelector:".configure-with-city",withProvinceSelector:".configure-with-province"}};$.fn.addressConfiguration=function(n){_checkInstance();var t=$(this);if(n=$.extend(!0,{},$.addressConfiguration.defaults,n),n.token=t.closest("form").find("input[name='__RequestVerificationToken']").val(),!n.token){console.error("RequestVerificationToken is required.");return}if(!n.getCities.url){console.error("Url to get cities is required.");return}return niAC.addAddress(t,n),t};