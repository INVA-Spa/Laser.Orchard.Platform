window.ecommerceData=$.extend(!0,{},window.ecommerceData);window.ecommerceData.detail=$.extend(!0,{},window.ecommerceData.detail);window.ecommerceData.detail.products=window.ecommerceData.detail.products||[];window.ecommerceData.impressions=window.ecommerceData.impressions||[];window.ecommerceData.cart=$.extend(!0,{},window.ecommerceData.cart);window.ecommerceData.cart.products=window.ecommerceData.cart.products||[];$(function(){window.ecommerceData=$.extend(!0,{},window.ecommerceData);window.ecommerceData.detail=$.extend(!0,{},window.ecommerceData.detail);window.ecommerceData.detail.products=window.ecommerceData.detail.products||[];window.ecommerceData.impressions=window.ecommerceData.impressions||[];window.ecommerceData.cart=$.extend(!0,{},window.ecommerceData.cart);window.ecommerceData.cart.products=window.ecommerceData.cart.products||[];var n={};n.impressions=window.ecommerceData.impressions;window.ecommerceData.detail.products.length&&(n.detail=window.ecommerceData.detail);window.dataLayer=window.dataLayer||[];window.dataLayer.push({ecommerce:n});$(document).on("nwazet.addedtocart","form.addtocart",function(){var r=$(this).serializeArray().reduce(function(n,t){return n[t.name]=t.value,n},{}),u=r.id,n={},t,f;for(i=0;i<window.ecommerceData.detail.products.length;i++)if(t=window.ecommerceData.detail.products[i],t.partId==u){n=t;break}if($.isEmptyObject(n))for(i=0;i<window.ecommerceData.impressions.length;i++)if(t=window.ecommerceData.impressions[i],t.partId==u){n=t;break}$.isEmptyObject(n)||(f=r.quantity,n.quantity=f,window.dataLayer.push({event:"addToCart",ecommerce:{add:{products:[n]}}}))}).on("nwazet.removefromcart",".shoppingcart .delete",function(){var r=$(this).attr("data-product-id"),n={},t;for(i=0;i<window.ecommerceData.cart.products.length;i++)if(t=window.ecommerceData.cart.products[i],t.partId==r){n=t;break}$.isEmptyObject(n)||(n.quantity>0&&(window.dataLayer.push({event:"removeFromCart",ecommerce:{remove:{products:[n]}}}),n.quantity=0),console.log("removefromcart"))}).on("nwazet.cartupdated",function(){console.log("cartupdated")})});